buildscript 
{
	repositories 
	{
		mavenLocal()
	    mavenCentral()
	}

  	dependencies {
    	classpath "io.spring.gradle:dependency-management-plugin:1.0.3.RELEASE"
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.7.RELEASE")
  	}
}

plugins 
{
  id 'net.saliman.cobertura' version '2.2.7'
  id "io.spring.dependency-management" version "1.0.3.RELEASE"
  id 'com.palantir.docker' version "0.9.0"
}


apply plugin: "io.spring.dependency-management"
apply plugin: 'org.springframework.boot'
apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'eclipse'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories 
{
	mavenLocal()
    mavenCentral()
    maven {
        url 'https://repo.spring.io/libs-release'
    }
}

war 
{
    baseName = 'Abbot3'
//    from('src/main/java') 
//    {
//    	include 'application.properties'
//    	into 'WEB-INF/classes/com/runcible/abbot'
//	}
}

docker
{
	name 'tombi/abbot'
	dockerfile 'src/main/docker/abbot/Dockerfile'
	dependsOn tasks.war, tasks.bootRepackage
}

dependencyManagement 
{
  imports 
  {
    mavenBom 'org.springframework.data:spring-data-releasetrain:Ingalls-SR7'
  }
}

dependencies 
{
	compile 'org.springframework:spring-context:4.3.11.RELEASE'
	compile 'org.springframework:spring-core:4.3.11.RELEASE'
	compile 'org.springframework:spring-webmvc:4.3.11.RELEASE'
	
    compile 'org.springframework.security:spring-security-core:4.2.3.RELEASE'
    compile 'org.springframework.security:spring-security-web:4.2.3.RELEASE'
    compile 'org.springframework.security:spring-security-config:4.2.3.RELEASE'
    compile 'org.springframework.boot:spring-boot-starter-data-jpa'
    
	compile 'org.springframework.data:spring-data-jpa:1.11.7.RELEASE'
	
	compile 'javax.validation:validation-api:2.0.0.Final'
	
	compile 'org.hibernate:hibernate-validator:6.0.2.Final'
	
	compile group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.3.0-rc1'
	
	compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'
	
	compile 'commons-dbcp:commons-dbcp'
	
	runtime 'com.fasterxml.jackson.core:jackson-core'
	runtime 'com.fasterxml.jackson.core:jackson-databind'
	//runtime 'javax.servlet:jstl'
	runtime group: 'org.hsqldb', name: 'hsqldb', version: '2.4.0'
			
	testCompile 'org.mockito:mockito-all:1.9.5'
	testCompile 'junit:junit:4.11+'
	testCompile 'org.springframework:spring-test:4.3.11.RELEASE'
	testCompile 'org.springframework:spring-web:4.3.11.RELEASE'
	testCompile 'com.fasterxml.jackson.core:jackson-annotations'
    testCompile 'com.fasterxml.jackson.core:jackson-databind'
    testCompile 'com.jayway.jsonpath:json-path:2.4.0'
    testCompile 'org.hamcrest:hamcrest-all:1.3'
    testCompile 'org.glassfish:javax.el:3.0.0'
	
	testRuntime 'javax.servlet:javax.servlet-api:3.1.0'
	testRuntime 'commons-fileupload:commons-fileupload:1.3.1'
	testRuntime 'javax.el:el-api:2.2'
}

test.finalizedBy(project.tasks.coberturaReport)


